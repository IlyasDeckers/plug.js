(function(h,u,v){function m(a,c){this.type=a;this._value=c}function n(){this._registrations={}}function p(){this._factories={}}function q(a,c,b){this._factory=a;this._moduleConstructor=c;this._dependencies=b}function k(){this._register=new n;this._factoryStore=new p}function r(){var a=new k,c;for(c in t)a.factory(c,t[c]);a.reference("window",h).reference("document",u);return a}var l=Array.isArray,w=/^[^a-zA-Z$_]+|[^a-zA-Z_0-9$]+/gi;(function(){function a(a,d){if(!l(a))throw Error("Value provided is not an array");
return a.map(function(a){return d?c(a,d):a})}function c(b,d){d=d||!1;var e=b;switch(!0){case b instanceof Element&&"object"===typeof b&&b.nodeName:e=b.cloneNode(d);break;case b instanceof Object||"object"===typeof b:e=d;if("object"!==typeof b)throw Error("Value provided is not an object");var f={},g;for(g in b)b.hasOwnProperty(g)&&(f[g]=e?c(b[g],e):b[g]);e=f;break;case b instanceof Array||l(b):e=a(b,d);break;case b instanceof Function||"function"===typeof b:if("function"!==typeof b)throw Error("Value provided is not a function");
e=b.bind({});break;case b instanceof Date:e=new Date,e.setTime(b.getTime())}return e}return{clone:c}})();var t={singleton:function(){var a;return{getInstance:function(c,b,d){a||(a=c.apply(d,b));return a}}},"transient":function(){return{getInstance:function(a,c,b){c.unshift(b);return new (Function.prototype.bind.apply(a,c))}}}};m.prototype=function(){return{getValue:function(){var a=this._value;1===this.type&&(a=this._value.getInstance());return a}}}();n.prototype=function(){return{add:function(a,
c,b){if("undefined"===typeof a||"undefined"===typeof c)throw Error("Invalid registration");this._registrations[a]=new m(c,b)},retrieve:function(a){if(!l(a))throw Error("Must provide at least one name");for(var c=[],b=0;b<a.length;b++){var d=a[b];if("string"!==typeof d)throw Error("Invalid name provided");c.push({name:a[b],resolution:this._registrations[d]})}return c}}}();p.prototype=function(){return{add:function(a,c){this._factories[a]=c},retrieve:function(a){if("undefined"!==typeof this._factories[a]){a=
new this._factories[a];if("undefined"===typeof a.getInstance)throw Error("Factory must contain a 'getInstance' method");return a}}}}();q.prototype=function(){return{getInstance:function(){var a=this._dependencies.map(function(a){return a.resolution?a.resolution.getValue():v});return this._factory.getInstance(this._moduleConstructor,a)}}}();k.prototype=function(){return{value:function(a,c,b){this._register.add(a,2,ObjectModifier.clone(c,b));return this},reference:function(a,c){this._register.add(a,
2,c);return this},factory:function(a,c){if("undefined"===typeof a||"function"!==typeof c)throw Error("A valid factory must be supplied");var b=a.replace(w,"");this._factoryStore.add(b,c);this[b]=function(a,c){if("undefined"===typeof a||!l(c))throw Error("Invalid module registration");if(1>=c.length&&"function"!==typeof c[0])throw Error("Module registration requires a constructor function");var f=c.pop();if("function"!==typeof f)throw Error("Last parameter of constructor array must be a constructor function");
var g=this._factoryStore.retrieve(b),h=this._register.retrieve(c),f=new q(g,f,h);this._register.add(a,1,f)}},resolve:function(a){a=this._register.retrieve([].concat(a));if(1==a.length)return a[0].resolution.getValue();for(var c={},b=0;b<a.length;b++){var d=a[b];"undefined"!==typeof d.resolution&&(c[d.name]=d.resolution.getValue())}return c}}}();k.prototype.create=r;(function(){if(!(h.plug&&h.plug instanceof k)){var a=r();h.plug=a}})()})(window,document);
