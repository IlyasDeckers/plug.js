(function(l,u,g){l.plug=new function(){function m(b){return b.type===k.module?b.value.getInstance():b.value}function q(b,a,d,e){if(b===g||!h(d))throw Error("Invalid singleton registration");if(1>d.length)throw Error("Module registration requires a constructor function");var c=d.pop();if("function"!==typeof c)throw Error("Last parameter of constructor array must be a constructor function");e=e||r;a=new v(a,c,d,e);n.add(b,k.module,a)}function p(b,a){n.add(b,k.injectable,a)}var r=this,h=Array.isArray,
k={module:1,injectable:2},w=function(b,a,d){return{name:b,type:a,value:d}},n=function(){var b=[];return{add:function(a,d,e){if(a===g||d===g)throw Error("Invalid registration");var c;a:{for(;0<b.length;){c=b[0].name===a;break a}c=void 0}if(c)for(;0<b.length;){c=b[0];c.name===a&&(c.value=e);break}b.push(new w(a,d,e))},retrieve:function(a){if(a===g||!h(a))throw Error("Must provide at least one name");for(var d=[],e=0;e<a.length;e++){var c;a:if((c=a[e])&&"string"==typeof c){for(var f=0;f<b.length;f++){var t=
b[f];if(t.name===c){c=t;break a}}console.warn("Failed to resolve "+c+". Expect undefined for mapped variable.");c=void 0}else console.warn("Invalid name provided"),c=g;d.push(c)}return d}}}();(function(){function b(a,d){if(a===g)return a;d=d||!1;var e=a;switch(!0){case a instanceof Object||"object"===typeof a:e=d;if("object"!=typeof a)throw Error("Not an object");var c={},f;for(f in a)a.hasOwnProperty(f)&&(c[f]=e?b(a[f],e):a[f]);e=c;break;case a instanceof Array||h(a):f=d;if(!h(a))throw Error("Not an array");
e=[];for(c=0;c<a.length;c++)e[c]=f?b(a[c],f):a[c];break;case a instanceof Date:e=new Date,e.setTime(a.getTime())}return e}return{clone:b}})();var v=function(b,a,d,e){function c(){var b=[];if(d!==g&&h(d))for(var c=Register.retrieve(d),f=0;f<c.length;f++)b.push(m(c[f]));return a.apply(e,b)}var f;return{type:b,getInstance:function(){if(2===b)return c();f===g&&(f=c());return f}}};p("window",l);p("document",u);return{ready:function(b){if(b===g||"function"!=typeof b)throw Error("Callback is not a function!");
l.onload=function(){b.call(r)}},value:function(b,a,d){n.add(b,k.injectable,ObjectModifier.clone(a,d))},reference:p,singleton:function(b,a,d){q(b,1,a,d)},"transient":function(b,a,d){q(b,2,a,d)},resolve:function(b){b=Register.retrieve([].concat(b));if(1==b.length)return m(b[0]);for(var a={},d=0;d<b.length;d++){var e=b[d];e!==g&&(a[e.name]=m(e))}return a}}}})(window,document);
